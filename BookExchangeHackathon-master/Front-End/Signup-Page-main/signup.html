<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" type="text/css" href="css/bootstrap.css"> -->

<script type="text/javascript" src="js/jquery.js"></script>
    <link rel="stylesheet" type="text/css"  href="style.css">
    <script src="https://kit.fontawesome.com/95319f9c76.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

</head>

<body>
    <div class="kuldeep">
        <div class="hero">
            <h1>Create an account</h1>
            <div class="signup-box">
                <div class="left-box">
                    <form>
                        <input type="text" placeholder="Your name" required class="input-box" id="ynm">
                        <input type="text" placeholder="Username" required class="input-box" id="unm">
                        <input type="email" placeholder="Your email id" required class="input-box" id="email">
                        <input type="password" placeholder="Create password" required class="input-box" id="pass">
                        <input type="checkbox" id="terms">
                        <label for="terms">Accept the terms and conditions</label>
                        <button type="submit"><a class="nav-link " data-bs-toggle="modal" type="button"
                            data-bs-target="#enroll" id="log2">SIGNUP</a>  <span> &#x27f6;</span></button>
                            
                    </form>
                    

<!-- <script type="text/javascript">

    var db=openDatabase("itemDB","1.0","itemDB",65535); // itemDB is the database name
    
    
    $(function(){
    
    loadData(); //loading our records
    
    
    
    //CREATING TABLE STARTS HERE
    
    $("#terms").click(function(){
    db.transaction(function(transaction){
        var sql="CREATE TABLE SIGNUP"+
        "(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,"+
        "Name VARCHAR(50) NOT NULL,"+
        "Username VARCHAR(55) NOT NULL)";
        transaction.executeSql(sql,undefined,function(){
            alert("Table is created successfully");
        },function(){
            alert("Table is already being created");
        })
    });
    });
    
    </script> -->
                </div>
                <div class="right-box">
                    <a href="https://www.facebook.com/" class="fb-link"> <i class="fa-brands fa-facebook"></i>With Facebook</a>
                    <a href="https://www.twitter.com/" class="tw-link"> <i class="fa-brands fa-twitter"> </i>Connect With Twitter</a>
                    <a href="https://www.google.com/" class="g-link"> <i class="fa-brands fa-google"> </i>Connect With Google</a>
                </div>
            </div>
            <p class="login-msg">I already have an account<a class="nav-link " data-bs-toggle="modal" type="button"
                    data-bs-target="#enroll" id="log">log in</a></p>
        </div>
    </div>

    <div class="modal fade" id="enroll" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Sign in as</h1>
                    <button type="button" class="btn-close redirect" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="button-center">
                        <div>
                            <button class="btn btn-dark mhover" data-bs-toggle="modal" data-bs-target="#admin"
                                type="button">Admin</button>
                            <button class="btn btn-dark mhover" data-bs-toggle="modal" data-bs-target="#customer"
                                type="button">Customer</button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!--  -->

    

    <!-- admin -->
    <div class="modal fade" id="admin" tabindex="-1" aria-labelledby="admin" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="admin">Welcome</h1>
                    <button type="button" class="btn-close  redirect" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row g-3 align-items-center">
                        <form>
                            <label for="username" class="col-form-label">Your Name</label>
                            <input type="text" id="name" class="form-control">
                            <label for="password" class="col-form-label">Password</label>
                            <input type="password" id="mypassword1" class="form-control">
                            <div class="col-auto mb-3">
                                <span id="passwordHelpInline" class="form-text">
                                    Must be 8-20 characters long special characters allowed.
                                </span>
                            </div>
                            <button type="button" class="btn btn-danger " id="admlgin">Login</button>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- customer -->
    <div class="modal fade " id="customer" tabindex="-1" aria-labelledby="customer" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="customer">Welcome</h1>
                    <button type="button" class="btn-close  redirect" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row g-3 align-items-center">
                        <form>
                            <label for="username" class="col-form-label">Email</label>
                            <input type="email" id="myemail" class="form-control">
                            <label for="password" class="col-form-label">Password</label>
                            <input type="password" id="mypassword"  class="form-control">
                            <div class="col-auto mb-3">
                                <span id="passwordHelpInline" class="form-text">
                                    Must be 8-20 characters long.
                                </span>
                            </div>
                            <button type="button" class="btn btn-danger " id="custlgin">Login</button>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">

        let x = document.querySelector('.kuldeep');
        
        let y = document.querySelector('#log');
        let a = document.querySelector('#log');

        y.onclick = () => {
            x.classList.add("inactive");
        }

        let z= document.querySelector('.redirect');
        z.onclick=()=>{
            x.classList.remove("inactive");
        }
        a.onclick = () => {
            x.classList.add("inactive");
        }

        //============= Database Management Started===============
        var db=openDatabase("itemDB","1.0","itemDB",65535); // itemDB is the database name

        $(function(){

        loadData();

        //CREATING TABLE STARTS HERE

$("#terms").click(function(){
db.transaction(function(transaction){
	var sql="CREATE TABLE items "+
	"(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,"+
	"ynm VARCHAR(100) NOT NULL,"+
	"unm VARCHAR(100) NOT NULL,"+
	"email VARCHAR(320) NOT NULL,"+
	"pass VARCHAR(100) NOT NULL)";
	transaction.executeSql(sql,undefined,function(){
		alert("Table is created successfully");
	},function(){
		// alert("Table is already being created");
	})
});
});
// CREATING TABLE ENDS HERE

$("#remove").click(function(){

if(!confirm("Are you sure to delete this table?","")) return;;
db.transaction(function(transaction){
	var sql="DROP TABLE items";
	transaction.executeSql(sql,undefined,function(){
		alert("Table is deleted successfully")
	},function(transaction,err){
		alert(err.message);
	})
});
});

//DELETING TABLE ENDS HERE
//There is no need to create delete table function again as sparsh's function is working fine


//INSERTING DATA INTO TABLE

$("#").click(function(){
var ynm=$("#ynm").val();
var unm=$("#unm").val();
var email=$("#email").val();
var pass=$("#pass").val();
db.transaction(function(transaction){
var sql="INSERT INTO items(ynm,unm,email,pass) VALUES(?,?,?,?)";
transaction.executeSql(sql,[ynm,unm,email,pass],function(){
	alert("New item is added successfully");
},function(transaction,err){
	alert(err.message);
})
})
})
//INSERTING DATA ENDS HERE
//index insert


//FETCHING OUR RECORD
$("#log2").click(function(){
loadData();
})
//FUNCTION TO LOAD OUR RECORDS
function loadData(){
		$("#itemlist").children().remove();
	db.transaction(function(transaction){
		var sql="SELECT * FROM items ORDER BY id DESC";
		transaction.executeSql(sql,undefined,function(transaction,result){
if(result.rows.length){

for(var i=0;i<result.rows.length;i++){
	var row=result.rows.item(i);
	var item=row.item;
	var ynm=row.ynm;
	var unm=row.unm;
	var email=row.email;
	var pass=row.pass;
	// $("#itemlist").append('<tr id="del'+id+'"><td>'+ynm+'</td><td>'+unm+'</td><td id="newqty'+id+'">'+email+'</td><td><a href="#" class="btn btn-danger deleteitem" data-id="'+id+'">Delete</a> <a href="#" class="btn btn-primary updateitem" data-id="'+id+'">Update</a></td></tr>');
	$("#itemlist").append('<tr><td>' +ynm+ '</td><td>' +unm+'</td><td>'+email+'</td><td>'+pass+'</td></tr>')
}
}else{
	$("#itemlist").append('<tr><td colspan="4" align="center">No Item Found</td></tr>');
}
		},function(transaction,err){
			alert('No table found. Click on "Create Table" to create table now');
		})
	})

    //setTimeout was used to execute codes inside it to be loaded after records are loaded/fetched.

setTimeout(function(){
	$(".deleteitem").click(function(){
var sure=confirm("Are you sure to delete this item?");
if(sure===true){
	var id=$(this).data("id");
db.transaction(function(transaction){
var sql="DELETE FROM items where id=?";
transaction.executeSql(sql,[id],function(){
	$("#del"+id).fadeOut();
	alert("Item is deleted successfully");
},function(transaction,err){
	alert(err.message);
})
});
}
})

(".updateitem").click(function(){
var qty=prompt("Kindly enter new quantity",1);
if(qty!==null){
	var id=$(this).data("id");
db.transaction(function(transaction){
var sql="UPDATE items SET quantity=? where id=?";
transaction.executeSql(sql,[qty,id],function(){
	$("#newqty"+id).html(qty);
	alert("Item is updated successfully");
},function(transaction,err){
	alert(err.message);
})
});
}
})

},1000);
}
//END OF loadData() function




});
// =========End of DBMS================


// -------------- script for signup admin page--------------
var admName = document.querySelector("#name");
var admPass = document.querySelector("#mypassword1");
var admLoginButton = document.querySelector("#admlgin");
// console.log(admName);
// console.log(admPass);
// console.log(admLoginButton);
var total1="";
admLoginButton.addEventListener('click' , () =>{
    var nameAdmin = admName.value;
    var passAdmin = admPass.value;
    total1=nameAdmin+passAdmin;
    if(total1=="anushk1234"){
        console.log("you entered correct");
        open("../admin.html");
    }
    else{
        // console.log("you entered incorrect details");
        alert("admin details incorrect");
    }
    // console.log(nameAdmin+passAdmin);
    // console.log(passAdmin);
});
let str="anushk1234";

// -------------- script for signup customer page--------------
let custemail=document.querySelector("#myemail");
let custpw=document.querySelector("#mypassword");
let custlgin=document.querySelector("#custlgin");

var total2;
custlgin.addEventListener('click', () => {
    var nameCust = custemail.value;
    var passCust = custpw.value;
    total2=nameCust + passCust ;
    if(total2=="anushk1234"){
        console.log("You entered correct");
        open("../customer.html");
    }
    else{
        // console.log("you entered incorrect details");
        alert("Customer details incorrect");
    }
})


    </script>
</body>

</html>